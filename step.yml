title: Flutter Build Patrol
summary: Install and Build Patrol for Flutter Projects
description: |-
  This steps initialy does:
  - Installing the Patrol CLI if it is not already installed.
  - Validates the installed Patrol CLI version and your project's Patrol version.
  - Builds the Patrol APK, iOS or BOTH if specified.
website: https://github.com/Gpac-LLC/patrol_build_flutter
source_code_url: https://github.com/Gpac-LLC/patrol_build_flutter
support_url: https://github.com/Gpac-LLC/patrol_build_flutter/issues

project_type_tags:
- flutter

type_tags:
  - test
  - build
  - integration

toolkit:
  go:
    package_name: github.com/Gpac-LLC/patrol_build_flutter

inputs:
- CUSTOM_PATROL_CLI_VERSION: ""
  opts:
    title: Custom Patrol CLI Version
    summary: Custom Patrol CLI Version
    description: |-
      If you want to use a specific version of Patrol, you can specify it here.
      If you leave this input empty, the step will use the latest version of Patrol CLI.
      
      If you specify a version that is not available, the step will fail.
      **Resources:**
      - [Compatibility Table](https://patrol.leancode.co/documentation/compatibility-table)
    is_required: false
- TEST_TARGET_DIRECTORY:
  opts:
    title: Test Target Directory
    summary: The directory that will be built by the step
    description: |-
      The directory that will be built by the step.
      If you leave this input empty, the step will use the default directory.
    is_required: true
- PLATFORM: both
  opts:
    title: Platform
    summary: The selected platform will be built, or both iOS and Android if you select both
    description: The selected platform will be built, or both iOs and Android if you select both
    is_required: true
    value_options:
    - both
    - ios
    - android
- TEST_BUILD_TYPE: release
  opts:
    title: Build Type
    summary: The build type to use for the selected Platform
    description: |-
      The build type to use for the selected Platform.
      If you leave this input empty, the step will use the default build type, which is `release`.
      You can specify `debug` or `release` as the build type.
    is_required: true
    value_options:
    - release
    - debug
- TAGS: ""
  opts:
    title: Tags
    summary: Tags to filter the tests to run
    description: |-
      Tags to filter the tests to run.
      You can specify multiple tags separated by commas.
      If you leave this input empty, all tests will be run.
    is_required: false
- EXCLUDED_TAGS: ""
  opts:
    title: Excluded Tags
    summary: Tags to exclude from the tests to run
    description: |-
      Tags to exclude from the tests to run.
      You can specify multiple tags separated by commas.
      If you leave this input empty, no tags will be excluded.
    is_required: false
- IS_VERBOSE_MODE: "false"
  opts:
    title: Print Verbose Output?
    summary: If debug mode is enabled, the step will print verbose logs
    description: |-
      If you want to disable verbose output for the step, you can set this input to `false`.
      If you leave this input empty, the step will enable verbose output.
      Verbose output can help you debug issues with the step.
      It will print additional information about the step's execution.
    is_required: false
    value_options:
    - "true"
    - "false"

outputs:
  - ANDROID_INSTRUMENTATION_APK_PATH:
    opts:
      title: Patrol Instrumentation APK Path
      summary: This output contains the path to the Instrumentation APK file
      description: The path to the Instrumentation APK file generated by the step
  - ANDROID_APK_PATH:
    opts:
      title: Patrol APK Path
      summary: This output contains the path to the APK file
      description: The path to the APK file generated by the step